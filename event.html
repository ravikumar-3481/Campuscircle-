<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CampusCircle Events</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Base */
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Inter', sans-serif;}
    :root{
      --primary:#2563eb; --primary-dark:#1d4ed8; --secondary:#64748b;
      --light:#f8fafc; --dark:#1e293b; --card-shadow:0 4px 12px rgba(0,0,0,0.08);
    }
    body{background:var(--light); color:var(--dark); line-height:1.6;}
    .container{ max-width:900px; margin:30px auto; padding:0 20px;}

    /* Glass Header */
    header { 
      background: rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      position: sticky; 
      top:0; 
      z-index:100; 
      padding:1rem 0; 
      border-bottom: 1px solid rgba(255,255,255,0.3);
    }
    .header-content { display:flex; justify-content:space-between; align-items:center;}
    .logo { font-size:1.6rem; font-weight:700; color:var(--primary);}
    .menu-icon { cursor:pointer; width:28px; height:20px; display:flex; flex-direction:column; justify-content:space-between;}
    .menu-icon span{ height:3px; width:100%; background-color:var(--dark); border-radius:3px;}
    .menu-icon.active span:nth-child(1){ transform:translateY(8px) rotate(45deg);}
    .menu-icon.active span:nth-child(2){ opacity:0;}
    .menu-icon.active span:nth-child(3){ transform:translateY(-8px) rotate(-45deg);}
    .nav-menu { display:none; position:absolute; top:100%; left:0; width:100%; border-radius:15px; background:white; padding:1rem 0; z-index:99; box-shadow:var(--card-shadow);}
    .nav-menu.active { display:block;}
    .nav-menu ul { list-style:none; text-align:center;}
    .nav-menu li { margin:1rem 0;}
    .nav-menu a { text-decoration:none; color:var(--dark); font-size:1.1rem; font-weight:500; padding:0.6rem 1.5rem; border-radius:8px; display:flex; align-items:center; justify-content:center;}
    .nav-menu a:hover { color:var(--primary);}
    .nav-menu a i { margin-right:0.5rem;}

    /* Hero */
    .hero { height:15vh; display:flex; align-items:center; justify-content:center; text-align:center; background:linear-gradient(135deg,#f0f9ff 0%,#e0f2fe 100%); border-radius:0 0 20px 20px; margin-bottom:2rem;}
    .hero h1 { font-size:2rem; color:var(--primary); font-weight:700;}
    .hero p { font-size:1rem; color:var(--secondary); margin-top:0.5rem;}

    /* Event Table */
    table { width:100%; border-collapse:collapse; background:white; border-radius:12px; overflow:hidden; box-shadow:var(--card-shadow);}
    th, td { padding:12px 15px; text-align:left; border-bottom:1px solid #eee;}
    th { background:#e0f2fe; cursor:pointer;}
    tr:hover { background:#f0f9ff; transition:0.3s;}

    /* Event Form */
    form { background:white; padding:20px; border-radius:12px; box-shadow:var(--card-shadow); margin-bottom:2rem;}
    form label { display:block; margin-top:12px; font-weight:600;}
    form input, form textarea { width:100%; padding:10px; margin-top:5px; border-radius:6px; border:1px solid #ccc; outline:none;}
    form input:focus, form textarea:focus { border-color:var(--primary); box-shadow:0 0 5px rgba(37,99,235,0.4);}
    form button { margin-top:20px; padding:10px 20px; background:var(--primary); color:white; border:none; border-radius:8px; cursor:pointer;}
    form button:hover { background:var(--primary-dark);}

    @media(max-width:768px){
      .container{ padding:0 15px;}
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo">Campus<span style="color:green;">Circle</span></div>
        <div class="menu-icon" id="menuIcon"><span></span><span></span><span></span></div>
        <nav class="nav-menu" id="navMenu">
          <ul>
            <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="add-alumni.html"><i class="fas fa-user-plus"></i> Add Alumni</a></li>
            <li><a href="#"><i class="fas fa-calendar-alt"></i> Events</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div>
      <h1>Campus Events</h1>
      <p>View and add upcoming events</p>
    </div>
  </section>

  <!-- Add Event Form -->
  <div class="container">
    <form id="addEventForm">
      <label for="title">Event Title</label>
      <input type="text" id="title" required>

      <label for="date">Date</label>
      <input type="date" id="date" required>

      <label for="time">Time</label>
      <input type="time" id="time" required>

      <label for="location">Location</label>
      <input type="text" id="location">

      <label for="description">Description</label>
      <textarea id="description" rows="4"></textarea>

      <button type="submit">Add Event</button>
    </form>
  </div>

  <!-- Events Table -->
  <div class="container">
    <table id="eventTable">
      <thead>
        <tr>
          <th>Title</th>
          <th>Date</th>
          <th>Time</th>
          <th>Location</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

<script>
  // Navbar toggle
  const menuIcon = document.getElementById('menuIcon');
  const navMenu = document.getElementById('navMenu');
  menuIcon.addEventListener('click', () => {
    menuIcon.classList.toggle('active');
    navMenu.classList.toggle('active');
  });
  document.querySelectorAll('.nav-menu a').forEach(link => {
    link.addEventListener('click', () => {
      if(window.innerWidth <= 768){
        menuIcon.classList.remove('active');
        navMenu.classList.remove('active');
      }
    });
  });

  // Fetch and render events
  let eventsData = [];

  async function fetchEvents() {
    try {
      const res = await fetch('/api/events'); // Your API endpoint
      eventsData = await res.json();
      renderEvents(eventsData);
    } catch(err) {
      console.error('Error fetching events:', err);
    }
  }

  function renderEvents(data) {
    const tbody = document.querySelector("#eventTable tbody");
    tbody.innerHTML = data.map(ev => `
      <tr>
        <td>${ev.title}</td>
        <td>${ev.date}</td>
        <td>${ev.time}</td>
        <td>${ev.location || '-'}</td>
        <td>${ev.description || '-'}</td>
      </tr>
    `).join('');
  }

  fetchEvents();

  // Add Event Form Submit
  const form = document.getElementById('addEventForm');
  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    const event = {
      title: document.getElementById('title').value,
      date: document.getElementById('date').value,
      time: document.getElementById('time').value,
      location: document.getElementById('location').value,
      description: document.getElementById('description').value
    };
    try {
      const res = await fetch('/api/events', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(event)
      });
      if(res.ok){
        alert('Event added successfully!');
        form.reset();
        fetchEvents(); // Refresh table
      } else {
        alert('Failed to add event.');
      }
    } catch(err){
      console.error('Error:', err);
      alert('Error adding event.');
    }
  });
</script>

</body>
</html>